import { cn } from "@/shared/lib/utils"
import gsap from "gsap"
import { useEffect, useRef } from "react"

const Svg = ({ isPageLoaded, isHidden }: { isPageLoaded: boolean; isHidden: boolean }) => {
	const maskRef1 = useRef<SVGRectElement>(null)
	const maskRef2 = useRef<SVGRectElement>(null)
	const pathRef1 = useRef<SVGRectElement>(null)
	const pathRef2 = useRef<SVGRectElement>(null)

	useEffect(() => {
		if (isPageLoaded) return
		gsap.fromTo([maskRef1.current, maskRef2.current], { y: 46 }, { y: 0, duration: 2, fill: "red", ease: "expo.inOut" })
		gsap.to([pathRef1.current, pathRef2.current], { fill: "red", duration: 0 })
	}, [isPageLoaded])

	return (
		<svg
			className={cn("z-20 relative transition duration-300 delay-100", isHidden && "opacity-0 pointer-events-none")}
			width='127'
			height='46'
			viewBox='0 0 127 46'
			xmlns='http://www.w3.org/2000/svg'
		>
			<defs>
				<clipPath id='mask1'>
					<rect ref={maskRef1} width='127' height='46' fill='white' />
				</clipPath>
				<clipPath id='mask2'>
					<rect ref={maskRef2} width='127' height='46' fill='white' />
				</clipPath>
			</defs>
			<path
				d='M45.2325 0.947005H45.2333H59.6381L48.2274 16.4964H48.1947L48.0447 16.6988C41.467 25.5792 33.998 35.5072 28.8592 42.2392L28.8591 42.2393C28.4065 42.8327 27.6708 43.4112 26.834 43.8412C25.9962 44.2717 25.1075 44.5275 24.3674 44.5259C20.8061 44.518 17.8349 44.5082 15.0423 44.4989C10.6685 44.4844 6.73271 44.4714 1.65428 44.4694C1.47026 44.4693 1.37683 44.2645 1.47712 44.1292C8.77901 34.2804 25.7813 10.9603 31.3831 3.24728C31.9898 2.4123 32.8652 1.83172 33.7644 1.45898C34.6655 1.08542 35.5549 0.935547 36.1469 0.935547C37.1974 0.935547 41.3932 0.941275 45.2325 0.947005Z'
				stroke='white'
				fill='none'
				strokeOpacity='0.15'
			/>
			<path
				d='M98.3715 3.23366L98.3717 3.2335C98.8243 2.64008 99.56 2.06158 100.397 1.63155C101.235 1.20097 102.123 0.945164 102.863 0.946785C106.433 0.954738 109.409 0.964601 112.207 0.973872C116.696 0.988745 120.725 1.0021 126.006 1.0036C118.85 10.6455 101.515 34.4224 95.8475 42.2254C95.2409 43.0604 94.3654 43.641 93.4662 44.0137C92.5651 44.3873 91.6756 44.5371 91.0836 44.5371C90.0599 44.5371 86.0474 44.5316 82.2901 44.5261L77.2523 44.5186L75.6379 44.5161L75.19 44.5154L75.0724 44.5152L75.0423 44.5152L75.0347 44.5152L75.0328 44.5152H75.0323C75.0322 44.5152 75.0322 44.5152 75.0314 45.0152L75.0322 44.5152H75.0314C59.1248 44.5152 52.6134 39.8986 50.6167 34.561C49.6075 31.8631 49.7123 28.8991 50.4305 26.0914C51.1484 23.2845 52.4715 20.6673 53.8518 18.6926C54.8185 17.3098 60.8702 8.99121 63.2048 5.79152L63.2142 5.7787L63.2227 5.76531C63.9299 4.65437 64.8296 3.37262 65.9796 1.86608L65.9799 1.86564C66.0373 1.7903 66.1015 1.72029 66.1738 1.64925L66.2048 1.61884L66.2301 1.58354L66.6863 0.946786H68.23H72.3818L72.3706 0.962433L73.3088 0.989175C76.0347 1.06687 78.7815 1.29269 81.0632 1.91462C83.3564 2.53967 85.0778 3.53678 85.8996 5.07733C87.0589 7.25075 86.3973 9.79739 85.1835 12.1302C84.3001 13.828 83.1976 15.2878 82.4157 16.323C82.1203 16.7142 81.8706 17.0448 81.6959 17.3046L81.6959 17.3047C80.4215 19.2003 77.7825 22.6483 75.4395 25.7094C75.1597 26.0749 74.8842 26.4349 74.6158 26.786L74.6157 26.786L74.6121 26.7908C74.2772 27.2401 73.9279 27.7365 73.6532 28.2493C73.3799 28.7593 73.1631 29.3169 73.1235 29.8871C73.0827 30.474 73.2316 31.0581 73.6587 31.5844C74.075 32.0974 74.7286 32.5226 75.6404 32.8661L76.0907 33.0357L76.2556 32.6441C83.7962 22.5337 91.0354 12.8443 98.3715 3.23366Z'
				stroke='white'
				fill='none'
				strokeOpacity='0.15'
			/>
			<path
				ref={pathRef1}
				d='M45.2325 0.947005H45.2333H59.6381L48.2274 16.4964H48.1947L48.0447 16.6988C41.467 25.5792 33.998 35.5072 28.8592 42.2392L28.8591 42.2393C28.4065 42.8327 27.6708 43.4112 26.834 43.8412C25.9962 44.2717 25.1075 44.5275 24.3674 44.5259C20.8061 44.518 17.8349 44.5082 15.0423 44.4989C10.6685 44.4844 6.73271 44.4714 1.65428 44.4694C1.47026 44.4693 1.37683 44.2645 1.47712 44.1292C8.77901 34.2804 25.7813 10.9603 31.3831 3.24728C31.9898 2.4123 32.8652 1.83172 33.7644 1.45898C34.6655 1.08542 35.5549 0.935547 36.1469 0.935547C37.1974 0.935547 41.3932 0.941275 45.2325 0.947005Z'
				fill='none'
				clipPath='url(#mask1)'
			/>
			<path
				ref={pathRef2}
				d='M98.3715 3.23366L98.3717 3.2335C98.8243 2.64008 99.56 2.06158 100.397 1.63155C101.235 1.20097 102.123 0.945164 102.863 0.946785C106.433 0.954738 109.409 0.964601 112.207 0.973872C116.696 0.988745 120.725 1.0021 126.006 1.0036C118.85 10.6455 101.515 34.4224 95.8475 42.2254C95.2409 43.0604 94.3654 43.641 93.4662 44.0137C92.5651 44.3873 91.6756 44.5371 91.0836 44.5371C90.0599 44.5371 86.0474 44.5316 82.2901 44.5261L77.2523 44.5186L75.6379 44.5161L75.19 44.5154L75.0724 44.5152L75.0423 44.5152L75.0347 44.5152L75.0328 44.5152H75.0323C75.0322 44.5152 75.0322 44.5152 75.0314 45.0152L75.0322 44.5152H75.0314C59.1248 44.5152 52.6134 39.8986 50.6167 34.561C49.6075 31.8631 49.7123 28.8991 50.4305 26.0914C51.1484 23.2845 52.4715 20.6673 53.8518 18.6926C54.8185 17.3098 60.8702 8.99121 63.2048 5.79152L63.2142 5.7787L63.2227 5.76531C63.9299 4.65437 64.8296 3.37262 65.9796 1.86608L65.9799 1.86564C66.0373 1.7903 66.1015 1.72029 66.1738 1.64925L66.2048 1.61884L66.2301 1.58354L66.6863 0.946786H68.23H72.3818L72.3706 0.962433L73.3088 0.989175C76.0347 1.06687 78.7815 1.29269 81.0632 1.91462C83.3564 2.53967 85.0778 3.53678 85.8996 5.07733C87.0589 7.25075 86.3973 9.79739 85.1835 12.1302C84.3001 13.828 83.1976 15.2878 82.4157 16.323C82.1203 16.7142 81.8706 17.0448 81.6959 17.3046L81.6959 17.3047C80.4215 19.2003 77.7825 22.6483 75.4395 25.7094C75.1597 26.0749 74.8842 26.4349 74.6158 26.786L74.6157 26.786L74.6121 26.7908C74.2772 27.2401 73.9279 27.7365 73.6532 28.2493C73.3799 28.7593 73.1631 29.3169 73.1235 29.8871C73.0827 30.474 73.2316 31.0581 73.6587 31.5844C74.075 32.0974 74.7286 32.5226 75.6404 32.8661L76.0907 33.0357L76.2556 32.6441C83.7962 22.5337 91.0354 12.8443 98.3715 3.23366Z'
				fill='none'
				clipPath='url(#mask2)'
			/>
		</svg>
	)
}

export default Svg
